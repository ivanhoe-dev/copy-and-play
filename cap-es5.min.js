"use strict";function _instanceof(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function _classCallCheck(e,t){if(!_instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var INPUT={TEXT:"<input>",TEXTAREA:"<textarea>"},TAG={BR:"<br>",DIV:"<div>"},INPUT_CLASS_NAME="copyTextInput",SUCCESS_MSG_ID="copySuccessMsg",cap=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"init",value:function(e){this.default={input:{visible:!1,type:INPUT.TEXTAREA},successMessage:{enable:!0,text:"Copied to clipboard",position:null,timeout:1e3},lineBreak:!0,onReady:null,onSuccess:null},this.options=$.extend(!0,{},this.default,e)}},{key:"copy",value:function(e,t){t&&(this.options=$.extend(!0,{},this.default,t)),this.options.onReady&&this.options.onReady(),this.removeElem("."+INPUT_CLASS_NAME),navigator.userAgent.match(/ipad|ipod|iphone/i)?this.iosCopy(this.createTextInput(e)):this.createTextInput(e)[0].select(),document.execCommand("copy"),this.options.input.visible||this.removeElem("."+INPUT_CLASS_NAME),this.options.successMessage.enable&&this.generateSuccessMsg(e),this.options.onSuccess&&this.options.onSuccess()}},{key:"iosCopy",value:function(e){var t=e;t.val();var n=t.get(0),s=n.contentEditable,i=n.readOnly;n.contentEditable=!0,n.readOnly=!1;var o=document.createRange();o.selectNodeContents(n);var a=window.getSelection();a.removeAllRanges(),a.addRange(o),n.setSelectionRange(0,999999),n.contentEditable=s,n.readOnly=i}},{key:"removeElem",value:function(e){var t=$(e);t&&t.remove()}},{key:"createTextInput",value:function(e){var t=$(e)[0],n=this.options.lineBreak?$(INPUT.TEXTAREA):$(this.options.input.type);n.val(this.options.lineBreak?this.parseLineBreak(t.innerHTML):t.innerHTML),n.addClass(INPUT_CLASS_NAME);var s=n[0];return t.appendChild(s),n}},{key:"parseLineBreak",value:function(e){var t=new RegExp(TAG.BR,"g");return e.replace(t,"\r")}},{key:"generateSuccessMsg",value:function(e){this.removeElem("#"+SUCCESS_MSG_ID);var t=$(TAG.DIV);t.attr("id",SUCCESS_MSG_ID),t.text(this.options.successMessage.text),$(null!=this.options.successMessage.position?this.options.successMessage.position:e).after(t[0]),this.options.successMessage.timeout>-1&&setTimeout(function(){t.remove()},this.options.successMessage.timeout)}}]),e}();